extends layout

block content
  .dashboard-container
    .top-section
      // Left Column - Metrics Cards
      .metrics
        // Combined Sales + Orders card
        .metric.double-card
          .metric-half
            h2 UGX #{insights.totalRevenue.toLocaleString()}
            span Sales
          .divider
          .metric-half
            h2 UGX #{insights.expectedRevenue.toLocaleString()}
            span Orders

        // In Stock card
        .metric
          h2.text-green UGX #{insights.stockCapital.toLocaleString()}
          span In stock

        // Out of Stock card
        .metric
          h2.text-red #{insights.outOfStock}
          span Out of stock

      // Right Column - Add Product Form
      .form-section
        h3 Add Product
        form#productForm(method="post" action="/addProduct" enctype="multipart/form-data")
          .form-row
            input(type="text" name="name" placeholder="Product Name" value=(formData && formData.name))
            if errors && errors.name
              small.error-msg= errors.name

          .form-row
            input(type="text" name="category" placeholder="Category" value=(formData && formData.category))
            if errors && errors.category
              small.error-msg= errors.category

          .form-row
            input(type="number" name="price" placeholder="Price" value=(formData && formData.price))
            if errors && errors.price
              small.error-msg= errors.price

          .form-row
            input(type="number" name="quantity" placeholder="Quantity" value=(formData && formData.quantity))
            if errors && errors.quantity
              small.error-msg= errors.quantity

          .form-row.double
            input(type="text" name="color" placeholder="Color" value=(formData && formData.color))
            input(type="file" name="image")
            if errors && errors.color
              small.error-msg= errors.color
            if errors && errors.image
              small.error-msg= errors.image

          .buttons
            button.btn-save(type="submit") SAVE
            button.btn-clear(type="reset") CLEAR

    // Bottom Section - Products Table
    .table-section
      table
        thead
          tr
            th ID
            th NAME
            th CATEGORY
            th PRICE (UGX)
            th QUANTITY
        tbody
          each product in products
            tr
              td ##{product._id}
              td #{product.name}
              td #{product.category}
              td #{product.price.toLocaleString()}
              td #{product.quantity}
